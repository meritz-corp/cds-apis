{
  "swagger": "2.0",
  "info": {
    "title": "kdo/v1/lp.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "LpService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/lps": {
      "get": {
        "summary": "ETF LP 조회",
        "operationId": "LpService_ListEtfLps",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpListEtfLpsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageSize",
            "description": "페이지 크기 (optional)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "pageToken",
            "description": "페이지 토큰 (optional, for pagination)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "filter",
            "description": "Available Sequence and Operator\n* etf_symbol\n  * `equal`, `contains`\n* fund_code\n  * `equal`, `contains`\n\nExamples\n* filter=etf_symbol:\"005930\"\n* filter=fund_code=\"0159\"",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/etfs/*/funds/*/status": {
      "get": {
        "summary": "ETF LP 상태 조회",
        "operationId": "LpService_ListEtfLpStatuses",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpListEtfLpStatusesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageSize",
            "description": "페이지 크기 (optional)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "pageToken",
            "description": "페이지 토큰 (optional, for pagination)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "filter",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "orderBy",
            "description": "오더링 조건. (optional, AIP-132)\n\nSupported Fields\n* \"fill_statistics.buy_filled_quantity\", \"fill_statistics.sell_filled_quantity\"\n\nExamples\n* order_by=fill_statistics.buy_filled_quantity desc",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/etfs/{symbol}/funds/{fundCode}": {
      "patch": {
        "summary": "ETF LP 업데이트",
        "operationId": "LpService_UpdateEtfLp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpEtfLp"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "symbol",
            "description": "ETF 심볼",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "[^/]+"
          },
          {
            "name": "fundCode",
            "description": "펀드 코드",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "[^/]+"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "quantity": {
                  "type": "string",
                  "format": "int64",
                  "title": "주문 수량"
                },
                "depth": {
                  "type": "integer",
                  "format": "int64",
                  "title": "호가 깊이"
                },
                "offset": {
                  "$ref": "#/definitions/lpEtfLpOffset",
                  "title": "동적 offset 조정 설정"
                }
              },
              "title": "UpdateEtfLp"
            }
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}": {
      "get": {
        "summary": "ETF LP 조회",
        "operationId": "LpService_GetEtfLp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpEtfLp"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}/orderbook": {
      "get": {
        "summary": "사용자 주문장 업데이트를 가져오기",
        "operationId": "LpService_GetUserOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1lpUserOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}/orderbook:stream": {
      "get": {
        "summary": "사용자 주문장 업데이트를 스트리밍",
        "operationId": "LpService_StreamUserOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1lpUserOrderbookData"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1lpUserOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}/status": {
      "get": {
        "summary": "ETF LP 상태 조회",
        "operationId": "LpService_GetEtfLpStatus",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpEtfLpStatus"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}/status_update:stream": {
      "get": {
        "summary": "ETF LP 상태 스트리밍 (실시간 업데이트)",
        "operationId": "LpService_StreamEtfLpStatusUpdate",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/lpEtfLpStatusUpdate"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of lpEtfLpStatusUpdate"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}:start": {
      "post": {
        "summary": "ETF LP 시작",
        "operationId": "LpService_StartEtfLp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpStartEtfLpResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "title": "ETF LP 시작 요청"
            }
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    },
    "/v1/lps/{etf}/{fund}:stop": {
      "post": {
        "summary": "ETF LP 중지",
        "operationId": "LpService_StopEtfLp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/lpStopEtfLpResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "title": "ETF LP 중지 요청"
            }
          }
        ],
        "tags": [
          "LpService"
        ]
      }
    }
  },
  "definitions": {
    "lpEtfLp": {
      "type": "object",
      "properties": {
        "symbol": {
          "type": "string",
          "title": "ETF 심볼"
        },
        "fundCode": {
          "type": "string",
          "title": "Fund"
        },
        "basis": {
          "type": "string",
          "format": "int64",
          "title": "Basis 스프레드 (원 단위, i64)"
        },
        "quantity": {
          "type": "string",
          "format": "int64",
          "title": "주문 수량 (i64)"
        },
        "depth": {
          "type": "integer",
          "format": "int64",
          "title": "호가 깊이 (양방향 레벨 수)"
        },
        "tickSize": {
          "type": "string",
          "format": "int64",
          "title": "ETF tick 크기 (원 단위, i64)"
        },
        "offset": {
          "$ref": "#/definitions/lpEtfLpOffset",
          "title": "동적 offset 조정 설정"
        }
      },
      "title": "ETF LP 설정"
    },
    "lpEtfLpOHedge": {
      "type": "object",
      "properties": {
        "symbol": {
          "type": "string",
          "title": "헷지 대상 종목 심볼"
        },
        "filledQuantityPerHedge": {
          "type": "string",
          "format": "int64",
          "title": "헷지 1주 주문당 ETF 체결수량 기준"
        }
      },
      "title": "ETF LP 헷지 설정"
    },
    "lpEtfLpOffset": {
      "type": "object",
      "properties": {
        "bidOffset": {
          "type": "number",
          "format": "double"
        },
        "askOffset": {
          "type": "number",
          "format": "double"
        },
        "minOffset": {
          "type": "number",
          "format": "double",
          "title": "NAV 밴드 설정"
        },
        "maxOffset": {
          "type": "number",
          "format": "double"
        },
        "timeAdjustmentEnabled": {
          "type": "boolean",
          "title": "시간 기반 조정"
        },
        "adjustmentIntervalSecs": {
          "type": "string",
          "format": "uint64"
        },
        "adjustmentStep": {
          "type": "number",
          "format": "double"
        },
        "resetOnFill": {
          "type": "boolean"
        },
        "positionAdjustmentEnabled": {
          "type": "boolean",
          "title": "순매매량 기반 조정"
        },
        "positionStrategy": {
          "$ref": "#/definitions/lpPositionAdjustmentStrategy"
        },
        "positionThreshold": {
          "type": "string",
          "format": "int64"
        },
        "positionAdjustmentStep": {
          "type": "number",
          "format": "double"
        }
      },
      "title": "자동 offset 조정 설정"
    },
    "lpEtfLpState": {
      "type": "string",
      "enum": [
        "ETF_LP_STATE_UNSPECIFIED",
        "ETF_LP_STATE_IDLE",
        "ETF_LP_STATE_RUNNING",
        "ETF_LP_STATE_STOPPING",
        "ETF_LP_STATE_ERROR"
      ],
      "default": "ETF_LP_STATE_UNSPECIFIED",
      "title": "ETF LP 상태 enum"
    },
    "lpEtfLpStatus": {
      "type": "object",
      "properties": {
        "etfSymbol": {
          "type": "string",
          "title": "ETF 심볼"
        },
        "fundCode": {
          "type": "string",
          "title": "펀드 코드"
        },
        "basis": {
          "type": "string",
          "format": "int64",
          "title": "Basis 스프레드 (원 단위, i64)"
        },
        "quantity": {
          "type": "string",
          "format": "int64",
          "title": "주문 수량 (i64)"
        },
        "state": {
          "$ref": "#/definitions/lpEtfLpState",
          "title": "LP 상태"
        },
        "pricing": {
          "$ref": "#/definitions/lpLpPricing",
          "title": "가격 정보"
        },
        "fillStatistics": {
          "$ref": "#/definitions/lpFillStatistics",
          "title": "체결 통계"
        },
        "offset": {
          "$ref": "#/definitions/lpEtfLpOffset",
          "title": "동적 offset 조정 설정 (optional)"
        },
        "hedge": {
          "$ref": "#/definitions/lpEtfLpOHedge",
          "title": "헷지 정보"
        }
      },
      "title": "ETF LP 상태"
    },
    "lpEtfLpStatusUpdate": {
      "type": "object",
      "properties": {
        "etfSymbol": {
          "type": "string",
          "title": "ETF 심볼"
        },
        "fundCode": {
          "type": "string",
          "title": "펀드 코드"
        },
        "basis": {
          "type": "string",
          "format": "int64",
          "title": "Basis 스프레드 (원 단위, i64)"
        },
        "quantity": {
          "type": "string",
          "format": "int64",
          "title": "주문 수량 (i64)"
        },
        "state": {
          "$ref": "#/definitions/lpEtfLpState",
          "title": "LP 상태"
        },
        "pricing": {
          "$ref": "#/definitions/lpLpPricing",
          "title": "가격 정보"
        },
        "fillStatistics": {
          "$ref": "#/definitions/lpFillStatistics",
          "title": "체결 통계"
        },
        "offset": {
          "$ref": "#/definitions/lpEtfLpOffset",
          "title": "동적 offset 조정 설정 (optional)"
        }
      },
      "title": "ETF LP 상태 업데이트 메시지 (변화된 필드만 포함)"
    },
    "lpFillStatistics": {
      "type": "object",
      "properties": {
        "buyFilledQuantity": {
          "type": "string",
          "format": "int64",
          "title": "매수 체결량"
        },
        "sellFilledQuantity": {
          "type": "string",
          "format": "int64",
          "title": "매도 체결량"
        },
        "buyTotalAmount": {
          "type": "string",
          "title": "매수 총금액 (평균 단가 계산용)"
        },
        "sellTotalAmount": {
          "type": "string",
          "title": "매도 총금액 (평균 단가 계산용)"
        }
      },
      "title": "ETF 체결 통계 (매수/매도 체결량 및 평균 단가)"
    },
    "lpListEtfLpStatusesResponse": {
      "type": "object",
      "properties": {
        "etfLpStatuses": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/lpEtfLpStatus"
          },
          "title": "ETF 목록"
        },
        "nextPageToken": {
          "type": "string",
          "title": "다음 페이지 토큰"
        }
      }
    },
    "lpListEtfLpsResponse": {
      "type": "object",
      "properties": {
        "etfLps": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/lpEtfLp"
          },
          "title": "ETF 목록"
        },
        "nextPageToken": {
          "type": "string",
          "title": "다음 페이지 토큰"
        }
      }
    },
    "lpLpPricing": {
      "type": "object",
      "properties": {
        "etfPrice": {
          "type": "string",
          "title": "ETF 가격 (원 단위)"
        },
        "etfAskNav": {
          "type": "string",
          "title": "ETF NAV (원 단위)"
        },
        "etfBidNav": {
          "type": "string"
        }
      },
      "title": "LP 가격 정보"
    },
    "lpPositionAdjustmentStrategy": {
      "type": "string",
      "enum": [
        "POSITION_ADJUSTMENT_STRATEGY_UNSPECIFIED",
        "POSITION_ADJUSTMENT_STRATEGY_AVOIDANCE",
        "POSITION_ADJUSTMENT_STRATEGY_TURNOVER",
        "POSITION_ADJUSTMENT_STRATEGY_ALL"
      ],
      "default": "POSITION_ADJUSTMENT_STRATEGY_UNSPECIFIED",
      "description": "- POSITION_ADJUSTMENT_STRATEGY_AVOIDANCE: 회피: 순매수 과다 시 매수offset 증가 (덜 공격적으로 매수)\n - POSITION_ADJUSTMENT_STRATEGY_TURNOVER: 매매회전: 순매수 과다 시 매도offset 감소 (더 공격적으로 매도)\n - POSITION_ADJUSTMENT_STRATEGY_ALL: 모두 적용: 순매수 과다 시 매수offset 증가 및 매도offset 감소",
      "title": "순매매량 기반 조정 전략"
    },
    "lpStartEtfLpResponse": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/lpEtfLpStatus",
          "title": "LP 상태"
        },
        "message": {
          "type": "string",
          "title": "메시지"
        }
      },
      "title": "ETF LP 시작 응답"
    },
    "lpStopEtfLpResponse": {
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/lpEtfLpStatus",
          "title": "LP 상태"
        },
        "message": {
          "type": "string",
          "title": "메시지"
        }
      },
      "title": "ETF LP 중지 응답"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1lpUserOrderbookData": {
      "type": "object",
      "properties": {
        "bidPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매수 호가 (10단계, AIP-144)"
        },
        "askPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매도 호가 (10단계)"
        },
        "bidQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매수 수량 (10단계)"
        },
        "askQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매도 수량 (10단계)"
        }
      },
      "title": "주문 업데이트 정보"
    }
  }
}
