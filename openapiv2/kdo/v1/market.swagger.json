{
  "swagger": "2.0",
  "info": {
    "title": "kdo/v1/market.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "MarketService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/market/{etf}/nav:stream": {
      "get": {
        "summary": "ETF NAV 데이터를 스트리밍",
        "description": "kdo.v1.etf.EtfNav",
        "operationId": "MarketService_StreamEtfNav",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/marketEtfNav"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of marketEtfNav"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          }
        ],
        "tags": [
          "MarketService"
        ]
      }
    },
    "/v1/market/{etf}/orderbook:stream": {
      "get": {
        "summary": "ETF 주문장 데이터를 스트리밍",
        "operationId": "MarketService_StreamEtfOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/marketEtfOrderbookData"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of marketEtfOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          }
        ],
        "tags": [
          "MarketService"
        ]
      }
    },
    "/v1/market/{etf}/{fund}/user-orderbook": {
      "get": {
        "summary": "사용자 주문장 업데이트를 가져오기",
        "operationId": "MarketService_GetUserOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1marketUserOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "MarketService"
        ]
      }
    },
    "/v1/market/{etf}/{fund}/user-orderbook:stream": {
      "get": {
        "summary": "사용자 주문장 업데이트를 스트리밍",
        "operationId": "MarketService_StreamUserOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/v1marketUserOrderbookData"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of v1marketUserOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "etf",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "etfs/[^/]+"
          },
          {
            "name": "fund",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "funds/[^/]+"
          }
        ],
        "tags": [
          "MarketService"
        ]
      }
    },
    "/v1/market/{future}/orderbook:stream": {
      "get": {
        "summary": "선물 주문장 데이터를 스트리밍",
        "operationId": "MarketService_StreamFuturesOrderbook",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/marketFuturesOrderbookData"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of marketFuturesOrderbookData"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "future",
            "description": "리소스 이름 (예: futures/K101W9000)",
            "in": "path",
            "required": true,
            "type": "string",
            "pattern": "futures/[^/]+"
          }
        ],
        "tags": [
          "MarketService"
        ]
      }
    }
  },
  "definitions": {
    "marketEtfNav": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "etfSymbol": {
          "type": "string"
        },
        "theoryNav": {
          "type": "string",
          "title": "순자산가치 (원 단위, string)"
        },
        "krxNav": {
          "type": "string",
          "title": "전일 대비 (string)"
        }
      }
    },
    "marketEtfOrderbookData": {
      "type": "object",
      "properties": {
        "bidPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매수 호가 (10단계, AIP-144)"
        },
        "askPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매도 호가 (10단계)"
        },
        "bidQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매수 수량 (10단계)"
        },
        "askQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매도 수량 (10단계)"
        },
        "lpBidQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "LP 매수 수량 (10단계)"
        },
        "lpAskQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "LP 매도 수량 (10단계)"
        },
        "midPrice": {
          "type": "string",
          "title": "중간 호가"
        },
        "midAskQuantity": {
          "type": "string",
          "format": "int64",
          "title": "중간 매도 수량"
        },
        "midBidQuantity": {
          "type": "string",
          "format": "int64",
          "title": "중간 매수 수량"
        },
        "askQuoteTotalQuantity": {
          "type": "string",
          "format": "int64",
          "title": "총 매도 호가 수량"
        },
        "bidQuoteTotalQuantity": {
          "type": "string",
          "format": "int64",
          "title": "총 매수 호가 수량"
        },
        "estPrice": {
          "type": "string",
          "title": "예상 가격"
        },
        "estVolume": {
          "type": "string",
          "format": "int64",
          "title": "예상 거래량"
        },
        "prevInav": {
          "type": "string",
          "title": "직전 inav"
        },
        "currentInav": {
          "type": "string",
          "title": "현재 inav"
        },
        "sessionId": {
          "$ref": "#/definitions/marketSessionId",
          "title": "세션 ID"
        }
      },
      "title": "ETF 주문장 데이터"
    },
    "marketFuturesOrderbookData": {
      "type": "object",
      "properties": {
        "bidPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매수 호가 (5단계, AIP-144)"
        },
        "askPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매도 호가 (5단계)"
        },
        "bidQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매수 수량 (5단계)"
        },
        "askQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매도 수량 (5단계)"
        },
        "bidCounts": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매수 주문 수 (5단계)"
        },
        "askCounts": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매도 주문 수 (5단계)"
        },
        "askQuoteTotalQuantity": {
          "type": "string",
          "format": "int64",
          "title": "총 매도 호가 수량"
        },
        "bidQuoteTotalQuantity": {
          "type": "string",
          "format": "int64",
          "title": "총 매수 호가 수량"
        },
        "midPrice": {
          "type": "string",
          "title": "중간 가격"
        },
        "estPrice": {
          "type": "string",
          "title": "예상 가격"
        },
        "estVolume": {
          "type": "string",
          "format": "int64",
          "title": "예상 거래량"
        },
        "sessionId": {
          "$ref": "#/definitions/marketSessionId",
          "title": "세션 ID"
        }
      },
      "title": "선물 주문장 데이터"
    },
    "marketSessionId": {
      "type": "string",
      "enum": [
        "SESSION_ID_UNSPECIFIED",
        "PREVIOUS",
        "CONNECTED",
        "OPENING_ONE_PRICE",
        "ONE_PRICE",
        "CLOSING_ONE_PRICE",
        "VI_ONE_PRICE",
        "VI_OPENING_ONE_PRICE",
        "VI_CLOSING_ONE_PRICE",
        "UNIT_TRADE",
        "POST_MARKET",
        "AUCTION_BID",
        "AUCTION_ASK",
        "SUSPENDED",
        "SHUTDOWN",
        "CLOSED",
        "ETC"
      ],
      "default": "SESSION_ID_UNSPECIFIED",
      "description": "- SESSION_ID_UNSPECIFIED: 기본값\n - PREVIOUS: 장개시전\n - CONNECTED: 연결됨\n - OPENING_ONE_PRICE: 시가단일가\n - ONE_PRICE: 단일가\n - CLOSING_ONE_PRICE: 종가단일가\n - VI_ONE_PRICE: VI장중단일가\n - VI_OPENING_ONE_PRICE: VI시가단일가\n - VI_CLOSING_ONE_PRICE: VI종가단일가\n - UNIT_TRADE: 단위매매\n - POST_MARKET: 장종료후호가접수\n - AUCTION_BID: 경매매수호가 접수 세션\n - AUCTION_ASK: 경매매도호가 접수 세션\n - SUSPENDED: 거래정지\n - SHUTDOWN: 셧다운\n - CLOSED: 장마감\n - ETC: 기타",
      "title": "세션 ID 열거형 (AIP-126)"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1marketUserOrderbookData": {
      "type": "object",
      "properties": {
        "bidPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매수 호가 (10단계, AIP-144)"
        },
        "askPrices": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "매도 호가 (10단계)"
        },
        "bidQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매수 수량 (10단계)"
        },
        "askQuantities": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "int64"
          },
          "title": "매도 수량 (10단계)"
        }
      },
      "title": "주문 업데이트 정보"
    }
  }
}
