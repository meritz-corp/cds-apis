{
  "swagger": "2.0",
  "info": {
    "title": "kdo/v1/auto_amend.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "AutoAmendService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/auto-amend/events:stream": {
      "get": {
        "summary": "이벤트 스트리밍",
        "operationId": "AutoAmendService_StreamEvents",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/auto_amendAutoAmendEvent"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of auto_amendAutoAmendEvent"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "orderIds",
            "description": "특정 주문 ID 필터 (optional, 미지정 시 전체)",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "format": "uint64"
            },
            "collectionFormat": "multi"
          }
        ],
        "tags": [
          "AutoAmendService"
        ]
      }
    },
    "/v1/auto-amend/orders": {
      "get": {
        "summary": "등록된 주문 목록 조회",
        "operationId": "AutoAmendService_ListOrders",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/auto_amendListAutoAmendOrdersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "symbol",
            "description": "종목 필터 (optional)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "side",
            "description": "주문 방향 필터 (optional)\n\n - ORDER_SIDE_BID: 매수\n - ORDER_SIDE_ASK: 매도",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "ORDER_SIDE_UNSPECIFIED",
              "ORDER_SIDE_BID",
              "ORDER_SIDE_ASK"
            ],
            "default": "ORDER_SIDE_UNSPECIFIED"
          },
          {
            "name": "activeOnly",
            "description": "활성화된 주문만 (optional, 기본: true)",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "AutoAmendService"
        ]
      }
    },
    "/v1/auto-amend/orders/{orderId}": {
      "get": {
        "summary": "등록된 주문 조회",
        "operationId": "AutoAmendService_GetOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/auto_amendAutoAmendOrder"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "orderId",
            "description": "주문 ID",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "uint64"
          }
        ],
        "tags": [
          "AutoAmendService"
        ]
      }
    },
    "/v1/auto-amend/orders/{orderId}/config": {
      "patch": {
        "summary": "설정 업데이트",
        "operationId": "AutoAmendService_UpdateConfig",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/auto_amendAutoAmendOrder"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "orderId",
            "description": "주문 ID",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "uint64"
          },
          {
            "name": "config",
            "description": "새 설정",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/auto_amendAmendConfig",
              "required": [
                "config"
              ]
            }
          }
        ],
        "tags": [
          "AutoAmendService"
        ]
      }
    }
  },
  "definitions": {
    "auto_amendAmendAction": {
      "type": "string",
      "enum": [
        "AMEND_ACTION_UNSPECIFIED",
        "AMEND_ACTION_CHANGE_PRICE",
        "AMEND_ACTION_CHANGE_QUANTITY",
        "AMEND_ACTION_CHANGE_PRICE_AND_QUANTITY"
      ],
      "default": "AMEND_ACTION_UNSPECIFIED",
      "description": "- AMEND_ACTION_CHANGE_PRICE: 가격 정정\n - AMEND_ACTION_CHANGE_QUANTITY: 수량 정정\n - AMEND_ACTION_CHANGE_PRICE_AND_QUANTITY: 가격+수량 정정",
      "title": "정정 액션 타입"
    },
    "auto_amendAmendConfig": {
      "type": "object",
      "properties": {
        "regularSession": {
          "$ref": "#/definitions/auto_amendRegularSessionConfig",
          "title": "장중 정정 설정"
        },
        "auctionSession": {
          "$ref": "#/definitions/auto_amendAuctionSessionConfig",
          "title": "동시호가 정정 설정"
        }
      },
      "title": "자동정정 설정"
    },
    "auto_amendAmendFailedEvent": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uint64",
          "title": "주문 ID"
        },
        "symbol": {
          "type": "string",
          "title": "종목 심볼"
        },
        "reason": {
          "type": "string",
          "title": "실패 사유"
        }
      },
      "title": "정정 실패 이벤트"
    },
    "auto_amendAmendedEvent": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uint64",
          "title": "주문 ID"
        },
        "symbol": {
          "type": "string",
          "title": "종목 심볼"
        },
        "action": {
          "$ref": "#/definitions/auto_amendAmendAction",
          "title": "정정 액션"
        },
        "oldPrice": {
          "type": "string",
          "format": "int64",
          "title": "이전 가격"
        },
        "newPrice": {
          "type": "string",
          "format": "int64",
          "title": "새 가격"
        },
        "oldQuantity": {
          "type": "string",
          "format": "int64",
          "title": "이전 수량"
        },
        "newQuantity": {
          "type": "string",
          "format": "int64",
          "title": "새 수량"
        },
        "reason": {
          "type": "string",
          "title": "정정 사유"
        }
      },
      "title": "정정 실행 이벤트"
    },
    "auto_amendAuctionSessionConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "활성화 여부"
        },
        "priceLimitPct": {
          "type": "number",
          "format": "double",
          "title": "예상체결가 대비 허용 가격 범위 (0.0 ~ 1.0, e.g., 0.01 = ±1%)"
        },
        "quantityLimitPct": {
          "type": "number",
          "format": "double",
          "title": "예상체결수량 대비 최대 수량 비율 (0.0 ~ 1.0, e.g., 0.30 = 30%)"
        }
      },
      "title": "동시호가 정정 설정 (예체가 관여 방지)"
    },
    "auto_amendAutoAmendEvent": {
      "type": "object",
      "properties": {
        "amended": {
          "$ref": "#/definitions/auto_amendAmendedEvent"
        },
        "amendFailed": {
          "$ref": "#/definitions/auto_amendAmendFailedEvent"
        },
        "sessionChanged": {
          "$ref": "#/definitions/auto_amendSessionChangedEvent"
        },
        "orderRegistered": {
          "$ref": "#/definitions/auto_amendOrderRegisteredEvent"
        },
        "orderUnregistered": {
          "$ref": "#/definitions/auto_amendOrderUnregisteredEvent"
        }
      },
      "title": "자동정정 이벤트"
    },
    "auto_amendAutoAmendOrder": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uint64",
          "title": "주문 ID"
        },
        "symbol": {
          "type": "string",
          "title": "종목 심볼"
        },
        "side": {
          "$ref": "#/definitions/commonOrderSide",
          "title": "주문 방향"
        },
        "price": {
          "type": "string",
          "title": "현재 주문 가격"
        },
        "quantity": {
          "type": "string",
          "format": "int64",
          "title": "현재 주문 수량"
        },
        "remainingQuantity": {
          "type": "string",
          "format": "int64",
          "title": "미체결 수량"
        },
        "config": {
          "$ref": "#/definitions/auto_amendAmendConfig",
          "title": "자동정정 설정"
        },
        "amendCount": {
          "type": "integer",
          "format": "int64",
          "title": "정정 횟수",
          "readOnly": true
        },
        "lastAmendTimeMs": {
          "type": "string",
          "format": "int64",
          "title": "마지막 정정 시각 (unix timestamp ms)",
          "readOnly": true
        },
        "isActive": {
          "type": "boolean",
          "title": "활성화 여부",
          "readOnly": true
        }
      },
      "title": "자동정정 등록 주문"
    },
    "auto_amendListAutoAmendOrdersResponse": {
      "type": "object",
      "properties": {
        "orders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/auto_amendAutoAmendOrder"
          },
          "title": "등록된 주문 목록"
        }
      }
    },
    "auto_amendOrderRegisteredEvent": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uint64",
          "title": "주문 ID"
        },
        "symbol": {
          "type": "string",
          "title": "종목 심볼"
        },
        "side": {
          "$ref": "#/definitions/commonOrderSide",
          "title": "주문 방향"
        }
      },
      "title": "주문 등록 이벤트"
    },
    "auto_amendOrderUnregisteredEvent": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string",
          "format": "uint64",
          "title": "주문 ID"
        },
        "reason": {
          "type": "string",
          "title": "해제 사유"
        }
      },
      "title": "주문 해제 이벤트"
    },
    "auto_amendRegularSessionConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "title": "활성화 여부"
        },
        "oppositeQtyRatioThreshold": {
          "type": "number",
          "format": "double",
          "title": "상대호가 잔량 비율 임계값 (0.0 ~ 1.0)\n매수: 매도1호가잔량 / 매수1호가잔량 \u003c threshold → 매도1호가로 정정\n매도: 매수1호가잔량 / 매도1호가잔량 \u003c threshold → 매수1호가로 정정"
        }
      },
      "title": "장중 자동정정 설정"
    },
    "auto_amendSessionChangedEvent": {
      "type": "object",
      "properties": {
        "oldSession": {
          "$ref": "#/definitions/commonTradingSession",
          "title": "이전 세션"
        },
        "newSession": {
          "$ref": "#/definitions/commonTradingSession",
          "title": "새 세션"
        }
      },
      "title": "세션 변경 이벤트"
    },
    "commonOrderSide": {
      "type": "string",
      "enum": [
        "ORDER_SIDE_UNSPECIFIED",
        "ORDER_SIDE_BID",
        "ORDER_SIDE_ASK"
      ],
      "default": "ORDER_SIDE_UNSPECIFIED",
      "description": "- ORDER_SIDE_BID: 매수\n - ORDER_SIDE_ASK: 매도",
      "title": "주문 방향"
    },
    "commonTradingSession": {
      "type": "string",
      "enum": [
        "TRADING_SESSION_UNSPECIFIED",
        "TRADING_SESSION_PRE_MARKET",
        "TRADING_SESSION_OPENING_AUCTION",
        "TRADING_SESSION_REGULAR",
        "TRADING_SESSION_CLOSING_AUCTION",
        "TRADING_SESSION_CLOSED"
      ],
      "default": "TRADING_SESSION_UNSPECIFIED",
      "description": "- TRADING_SESSION_PRE_MARKET: 장 시작 전\n - TRADING_SESSION_OPENING_AUCTION: 시가 동시호가 (08:30 ~ 09:00)\n - TRADING_SESSION_REGULAR: 장중 (09:00 ~ 15:20)\n - TRADING_SESSION_CLOSING_AUCTION: 종가 동시호가 (15:20 ~ 15:30)\n - TRADING_SESSION_CLOSED: 장 종료",
      "title": "거래 세션 타입"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
